version                         = "%{version}%"
description                     = "[@@deriving hardcaml]"
requires(-ppx_driver)           = "ppx_deriving ppx_deriving_hardcaml.runtime"
ppxopt(-ppx_driver,-custom_ppx) = "ppx_deriving,./ppx_deriving_hardcaml.cma"
requires(ppx_driver)            = "ppx_deriving.api"
archive(ppx_driver, byte)       = "ppx_deriving_hardcaml.cma"
archive(ppx_driver, native)     = "ppx_deriving_hardcaml.cmxa"
exists_if                       = "ppx_deriving_hardcaml.cma"

package "runtime" (
  version                 = "%{version}%"
  description             = "Runtime components of [@@deriving hardcaml]"
  requires                = "hardcaml result ppx_deriving.runtime"
  archive(byte)           = "ppx_deriving_hardcaml_runtime.cma"
  archive(byte, plugin)   = "ppx_deriving_hardcaml_runtime.cma"
  archive(native)         = "ppx_deriving_hardcaml_runtime.cmxa"
  archive(native, plugin) = "ppx_deriving_hardcaml_runtime.cmxs"
  exists_if               = "ppx_deriving_hardcaml_runtime.cma"
)
